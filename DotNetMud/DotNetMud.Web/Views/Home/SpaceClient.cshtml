
@{
    ViewBag.Title = "Client";
}

@section scripts {

<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<!--Reference the SignalR library. -->
<script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>
<!--Reference the autogenerated SignalR hub script. -->
<script src="~/signalr/hubs"></script>
<!--Add script to update the page and send messages.-->
<script type="text/javascript">
    $(function() {
        //Set the hubs URL for the connection
        $.connection.hub.url = "http://localhost:30518/signalr";

        // Declare a proxy to reference the hub.
        var chat = $.connection.spaceHub;

        chat.client.serverSendsPollResultToClient = function (data) {
            var encodedMsg = $('<div class="fromServer" />').text(JSON.stringify(data));
            // Add the message to the page.
            $('#foo').append(encodedMsg);
        }

        // Set initial focus to message input box.
        $('#message').focus();
        // Start the connection.
        $.connection.hub.start().done(function() {
            setInterval(function () { chat.server.clientRequestsPollFromServer(); }, 1000);
        });
    });
</script>

}

<h2>Client</h2>

<div class="container">
    <div class="row">
        <div id="foo" class="col-md-12">
        </div>
    </div>
</div>
